<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        <!-- Our CSS -->
        <link rel="stylesheet" type="text/css" href="static/css/style.css">
        <link rel="shortcut icon" href="static/images/favicon.ico">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.13/Tone.js" integrity="sha512-SAB2YrHeaZfb6W1w+tAMm+IUICzUMyf7TJ8upY+NjLYl8jseufUW4yYzoSHfNL9N2rzDlw5PWJrf7rPIQ6VhNw==" crossorigin="anonymous"></script>
        <!-- Add Tensorflow js -->
         <script src="https://cdnjs.cloudflare.com/ajax/libs/tensorflow/1.2.8/tf.min.js"></script>
         <!-- Core library, since we're going to use a player -->
         <script src="https://cdn.jsdelivr.net/npm/@magenta/music@^1.21.0/es6/core.js"></script>
         <!--Model we want to use -->
         <script src="https://cdn.jsdelivr.net/npm/@magenta/music@^1.21.0/es6/music_rnn.js"></script>
    </head>
    <body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="./">Dice Waltz Generator</a>
    <div class="collapse navbar-collapse" id="navbarColor02">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link active" href="./">Home
            <span class="visually-hidden">(current)</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="./static/resources/output.py">Access AI Generated File</a>
        </li>

      </ul>

    </div>
  </div>
</nav>

<div class="container-fluid">
    <div class="bg-image">
        <div class="info">


        <h1 id= "flavtext">The Dice Waltz</h1>
        <p id= "flavtext"> Musikalisches Wurfelspiel was a dice game invented by Mozart in 1792.
            The game uses a pair of dice to select measures of music to generate an 8 measure waltz.
            The sum of the dice roll will correspond to a number in a chart which will determine the notes in the measure and each roll of the dice is a measure. </p>
    <table class="tg">
    <thead>
      <tr>
        <th class="tg-0pky"></th>
        <th class="tg-0pky">1</th>
        <th class="tg-0pky">2</th>
        <th class="tg-0pky">3</th>
        <th class="tg-0pky">4</th>
        <th class="tg-0pky">5</th>
        <th class="tg-0pky">6</th>
        <th class="tg-0pky">7</th>
        <th class="tg-0pky">8</th>
        <th class="tg-0pky">9</th>
        <th class="tg-0pky">10</th>
        <th class="tg-0pky">11</th>
        <th class="tg-0pky">12</th>
        <th class="tg-0pky">13</th>
        <th class="tg-0pky">14</th>
        <th class="tg-0pky">15</th>
        <th class="tg-0pky">16</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="tg-0pky">2</td>
        <td class="tg-0pky">96</td>
        <td class="tg-0pky">22</td>
        <td class="tg-0pky">141</td>
        <td class="tg-0pky">41</td>
        <td class="tg-0pky">105</td>
        <td class="tg-0pky">122</td>
        <td class="tg-0pky">11</td>
        <td class="tg-0pky">30</td>
        <td class="tg-0pky">70</td>
        <td class="tg-0pky">121</td>
        <td class="tg-0pky">26</td>
        <td class="tg-0pky">9</td>
        <td class="tg-0pky">112</td>
        <td class="tg-0pky">49</td>
        <td class="tg-0pky">109</td>
        <td class="tg-0pky">14</td>
      </tr>
      <tr>
        <td class="tg-0pky">3</td>
        <td class="tg-0pky">32</td>
        <td class="tg-0pky">6</td>
        <td class="tg-0pky">128</td>
        <td class="tg-0pky">63</td>
        <td class="tg-0pky">146</td>
        <td class="tg-0pky">46</td>
        <td class="tg-0pky">134</td>
        <td class="tg-0pky">81</td>
        <td class="tg-0pky">117</td>
        <td class="tg-0pky">39</td>
        <td class="tg-0pky">126</td>
        <td class="tg-0pky">56</td>
        <td class="tg-0pky">174</td>
        <td class="tg-0pky">18</td>
        <td class="tg-0pky">116</td>
        <td class="tg-0pky">83</td>
      </tr>
      <tr>
        <td class="tg-0pky">4</td>
        <td class="tg-0pky">69</td>
        <td class="tg-0pky">95</td>
        <td class="tg-0pky">158</td>
        <td class="tg-0pky">13</td>
        <td class="tg-0pky">153</td>
        <td class="tg-0pky">55</td>
        <td class="tg-0pky">110</td>
        <td class="tg-0pky">24</td>
        <td class="tg-0pky">66</td>
        <td class="tg-0pky">139</td>
        <td class="tg-0pky">15</td>
        <td class="tg-0pky">132</td>
        <td class="tg-0pky">73</td>
        <td class="tg-0pky">58</td>
        <td class="tg-0pky">145</td>
        <td class="tg-0pky">79</td>
      </tr>
      <tr>
        <td class="tg-0pky">5</td>
        <td class="tg-0pky">40</td>
        <td class="tg-0pky">17</td>
        <td class="tg-0pky">113</td>
        <td class="tg-0pky">85</td>
        <td class="tg-0pky">161</td>
        <td class="tg-0pky">2</td>
        <td class="tg-0pky">159</td>
        <td class="tg-0pky">100</td>
        <td class="tg-0pky">90</td>
        <td class="tg-0pky">176</td>
        <td class="tg-0pky">7</td>
        <td class="tg-0pky">34</td>
        <td class="tg-0pky">67</td>
        <td class="tg-0pky">160</td>
        <td class="tg-0pky">52</td>
        <td class="tg-0pky">170</td>
      </tr>
      <tr>
        <td class="tg-0pky">6</td>
        <td class="tg-0pky">148</td>
        <td class="tg-0pky">74</td>
        <td class="tg-0pky">163</td>
        <td class="tg-0pky">45</td>
        <td class="tg-0pky">80</td>
        <td class="tg-0pky">97</td>
        <td class="tg-0pky">36</td>
        <td class="tg-0pky">107</td>
        <td class="tg-0pky">25</td>
        <td class="tg-0pky">143</td>
        <td class="tg-0pky">64</td>
        <td class="tg-0pky">125</td>
        <td class="tg-0pky">76</td>
        <td class="tg-0pky">136</td>
        <td class="tg-0pky">1</td>
        <td class="tg-0pky">93</td>
      </tr>
      <tr>
        <td class="tg-0pky">7</td>
        <td class="tg-0pky">104</td>
        <td class="tg-0pky">157</td>
        <td class="tg-0pky">27</td>
        <td class="tg-0pky">167</td>
        <td class="tg-0pky">154</td>
        <td class="tg-0pky">68</td>
        <td class="tg-0pky">118</td>
        <td class="tg-0pky">91</td>
        <td class="tg-0pky">138</td>
        <td class="tg-0pky">71</td>
        <td class="tg-0pky">150</td>
        <td class="tg-0pky">29</td>
        <td class="tg-0pky">101</td>
        <td class="tg-0pky">162</td>
        <td class="tg-0pky">23</td>
        <td class="tg-0pky">151</td>
      </tr>
      <tr>
        <td class="tg-0pky">8</td>
        <td class="tg-0pky">152</td>
        <td class="tg-0pky">60</td>
        <td class="tg-0pky">171</td>
        <td class="tg-0pky">53</td>
        <td class="tg-0pky">99</td>
        <td class="tg-0pky">133</td>
        <td class="tg-0pky">21</td>
        <td class="tg-0pky">127</td>
        <td class="tg-0pky">16</td>
        <td class="tg-0pky">155</td>
        <td class="tg-0pky">57</td>
        <td class="tg-0pky">175</td>
        <td class="tg-0pky">43</td>
        <td class="tg-0pky">168</td>
        <td class="tg-0pky">89</td>
        <td class="tg-0pky">172</td>
      </tr>
      <tr>
        <td class="tg-0pky">9</td>
        <td class="tg-0pky">119</td>
        <td class="tg-0pky">84</td>
        <td class="tg-0pky">114</td>
        <td class="tg-0pky">50</td>
        <td class="tg-0pky">140</td>
        <td class="tg-0pky">86</td>
        <td class="tg-0pky">169</td>
        <td class="tg-0pky">94</td>
        <td class="tg-0pky">120</td>
        <td class="tg-0pky">88</td>
        <td class="tg-0pky">48</td>
        <td class="tg-0pky">166</td>
        <td class="tg-0pky">51</td>
        <td class="tg-0pky">115</td>
        <td class="tg-0pky">72</td>
        <td class="tg-0pky">111</td>
      </tr>
      <tr>
        <td class="tg-0pky">10</td>
        <td class="tg-0pky">98</td>
        <td class="tg-0pky">142</td>
        <td class="tg-0pky">42</td>
        <td class="tg-0pky">156</td>
        <td class="tg-0pky">75</td>
        <td class="tg-0pky">129</td>
        <td class="tg-0pky">62</td>
        <td class="tg-0pky">123</td>
        <td class="tg-0pky">65</td>
        <td class="tg-0pky">77</td>
        <td class="tg-0pky">19</td>
        <td class="tg-0pky">82</td>
        <td class="tg-0pky">137</td>
        <td class="tg-0pky">38</td>
        <td class="tg-0pky">149</td>
        <td class="tg-0pky">8</td>
      </tr>
      <tr>
        <td class="tg-0pky">11</td>
        <td class="tg-0pky">54</td>
        <td class="tg-0pky">130</td>
        <td class="tg-0pky">10</td>
        <td class="tg-0pky">103</td>
        <td class="tg-0pky">28</td>
        <td class="tg-0pky">37</td>
        <td class="tg-0pky">106</td>
        <td class="tg-0pky">5</td>
        <td class="tg-0pky">35</td>
        <td class="tg-0pky">20</td>
        <td class="tg-0pky">108</td>
        <td class="tg-0pky">92</td>
        <td class="tg-0pky">12</td>
        <td class="tg-0pky">124</td>
        <td class="tg-0pky">44</td>
        <td class="tg-0pky">131</td>
      </tr>
      <tr>
        <td class="tg-0pky">12</td>
        <td class="tg-0pky">3</td>
        <td class="tg-0pky">87</td>
        <td class="tg-0pky">165</td>
        <td class="tg-0pky">61</td>
        <td class="tg-0pky">135</td>
        <td class="tg-0pky">47</td>
        <td class="tg-0pky">147</td>
        <td class="tg-0pky">33</td>
        <td class="tg-0pky">102</td>
        <td class="tg-0pky">4</td>
        <td class="tg-0pky">31</td>
        <td class="tg-0pky">164</td>
        <td class="tg-0pky">144</td>
        <td class="tg-0pky">59</td>
        <td class="tg-0pky">173</td>
        <td class="tg-0pky">78</td>
      </tr>
    </tbody>
    </table>

        </div>
        <h3 id= "flavtext">Want to roll the dice to get a feel? Try below. </h3>
        <!-- added from stackoverflow -->
        <button id="roll" type="button">Click to roll</button>
        <div id="die" class="dice">
        </div>
        <div id="die2" class="dice">
        </div>
        <div class="player" id= "visualizer">
            <script type="text/javascript">
            const player = new core.Player();
          const melodyCheckpoint = 'https://storage.googleapis.com/magentadata/js/checkpoints/music_rnn/melody_rnn';
          const musicRnn = new music_rnn.MusicRNN(melodyCheckpoint);
          musicRnn.initialize().then(() => {
            core.urlToNoteSequence('static/resources/M1.MID').then((note_seq) => {
              console.log(note_seq)
              const quantized = core.sequences.quantizeNoteSequence(note_seq, note_seq.tempos[0].qpm);
              console.log(quantized)
              musicRnn.continueSequence(quantized, 1200, 0.8).then((new_seq) => {
                console.log(new_seq)
                const combined = core.sequences.concatenate([quantized, new_seq])
                console.log(combined)
                let config = {
                noteHeight: 6,
                pixelsPerTimeStep: 30,  // like a note width
                noteSpacing: 1,
                noteRGB: '8, 41, 64',
                activeNoteRGB: '240, 84, 119',
                  }
                  let visualizer = new core.Visualizer(combined, document.getElementById('visualizer'), config);
                  let vizPlayer = new core.Player(false, {
                    run: (note) => visualizer.redraw(note),
                    stop: () => {console.log('done');}
          });
                player.start(combined);
                player.resume(combined);
                document.getElementById('roll').onclick.player.resume(combined);

              })
            })
          });
            </script>
  <div class="container-fluid">
    <div class="bg-image">
        <div class="info">
            <h3 id= "flavtext">The Process...</h3>
            <h5 id= "flavtext">Import human composed music files</h5>
            <p id= "flavtext">  The dice roll corresponds to individual midi (music) files of Mozart's dice game table, which are imported and stored to 
              convert and run the the Music_Rnn model of Magenta. Magenta was started by researchers and engineers from the Google Brain team and is 
              distributed as an open source python library. This library includes utilities for manipulating source data (primarily music and images), 
              using this data to train machine learning models, and finally generating new content from these models.  </p>
              <a href="https://magenta.github.io/magenta-js/music/globals.html" target="_blank">Magenta Music</a>
        
              <h5 id= "flavtext">File conversion, quantizing and machine learning</h5>
              <p id= "flavtext">Briana's text here </p>

              <h5 id= "flavtext">Output</h5>
              <p id= "flavtext">The magenta model then concatenates the original note string with the string it generated and plays them back to back.  </p>
        </div>
    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="static/js/static.js"></script>

    </body>
</html>
